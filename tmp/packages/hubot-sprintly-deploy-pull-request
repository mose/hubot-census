{"_id":"hubot-sprintly-deploy-pull-request","_rev":"2-67ddcd2d1072d2c10a77b994d4c4ed8a","name":"hubot-sprintly-deploy-pull-request","description":"Search Pull Request descriptions to mark items as deployed in Sprint.ly","dist-tags":{"latest":"0.0.2"},"versions":{"0.0.0":{"name":"hubot-sprintly-deploy-pull-request","version":"0.0.0","description":"Search Pull Request descriptions to mark items as deployed in Sprint.ly","main":"index.coffee","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"homepage":"https://github.com/maxbeatty/hubot-sprintly-deploy-pull-request","repository":{"type":"git","url":"git://github.com/maxbeatty/hubot-sprintly-deploy-pull-request.git"},"keywords":["hubot","sprintly","github"],"author":{"name":"Max Beatty"},"license":"MIT","bugs":{"url":"https://github.com/maxbeatty/hubot-sprintly-deploy-pull-request/issues"},"dependencies":{"hubot":">= 2.4.0","githubot":"~0.5.0"},"_id":"hubot-sprintly-deploy-pull-request@0.0.0","dist":{"shasum":"f274cd1f409243e1d5d326af8f558493d4bf10bf","tarball":"http://registry.npmjs.org/hubot-sprintly-deploy-pull-request/-/hubot-sprintly-deploy-pull-request-0.0.0.tgz"},"_from":".","_npmVersion":"1.2.30","_npmUser":{"name":"maxbeatty","email":"max@beatty.me"},"maintainers":[{"name":"maxbeatty","email":"max@beatty.me"}]},"0.0.1":{"name":"hubot-sprintly-deploy-pull-request","version":"0.0.1","description":"Search Pull Request descriptions to mark items as deployed in Sprint.ly","main":"index.coffee","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"homepage":"https://github.com/maxbeatty/hubot-sprintly-deploy-pull-request","repository":{"type":"git","url":"git://github.com/maxbeatty/hubot-sprintly-deploy-pull-request.git"},"keywords":["hubot","sprintly","github"],"author":{"name":"Max Beatty"},"license":"MIT","bugs":{"url":"https://github.com/maxbeatty/hubot-sprintly-deploy-pull-request/issues"},"dependencies":{"hubot":">= 2.4.0","githubot":"~0.5.0"},"_id":"hubot-sprintly-deploy-pull-request@0.0.1","dist":{"shasum":"dc2b64f98d9be2d05d632544cd8adee753f5b4dd","tarball":"http://registry.npmjs.org/hubot-sprintly-deploy-pull-request/-/hubot-sprintly-deploy-pull-request-0.0.1.tgz"},"_from":".","_npmVersion":"1.2.30","_npmUser":{"name":"maxbeatty","email":"max@beatty.me"},"maintainers":[{"name":"maxbeatty","email":"max@beatty.me"}]},"0.0.2":{"name":"hubot-sprintly-deploy-pull-request","version":"0.0.2","description":"Search Pull Request descriptions to mark items as deployed in Sprint.ly","main":"index.coffee","scripts":{"test":"echo \"Error: no test specified\" && exit 1"},"homepage":"https://github.com/maxbeatty/hubot-sprintly-deploy-pull-request","repository":{"type":"git","url":"git://github.com/maxbeatty/hubot-sprintly-deploy-pull-request.git"},"keywords":["hubot","sprintly","github"],"author":{"name":"Max Beatty"},"license":"MIT","bugs":{"url":"https://github.com/maxbeatty/hubot-sprintly-deploy-pull-request/issues"},"dependencies":{"hubot":">= 2.4.0","githubot":"~0.5.0"},"_id":"hubot-sprintly-deploy-pull-request@0.0.2","dist":{"shasum":"e9b926cc8f528e403f340130df1d65ed12e03a7a","tarball":"http://registry.npmjs.org/hubot-sprintly-deploy-pull-request/-/hubot-sprintly-deploy-pull-request-0.0.2.tgz"},"_from":".","_npmVersion":"1.2.30","_npmUser":{"name":"maxbeatty","email":"max@beatty.me"},"maintainers":[{"name":"maxbeatty","email":"max@beatty.me"}]}},"readme":"Hubot Sprint.ly Deploy Pull Request\n==================================\n\nSearch Pull Request descriptions to mark items as deployed in Sprint.ly\n\n## Installation\n\n1. In your hubot repo, `npm install hubot-sprintly-deploy-pull-request --save`\n2. Add `hubot-sprintly-deploy-pull-request` to your `external-scripts.json`\n\nYou'll also need to set these environment variables:\n\n- `HUBOT_GITHUB_TOKEN`: GitHub authentication token\n- `HUBOT_GITHUB_USER`: (optional) GitHub user/organization to identify owner of repository\n- `HUBOT_SPRINTLY_TOKEN`: (optional) Sprint.ly authentication token <email:api_key>\n- `HUBOT_SPRINTLY_PRODUCT_ID`: (optional) Sprint.ly product id\n\nIf you don't have a GitHub token yet, run this:\n\n```bash\ncurl -i https://api.github.com/authorizations -d '{\"scopes\":[\"repo\"]}' -u \"yourusername\"\n```\n\n## Usage\n\nIn your deploy script, make a request to `http://your-hubot-host/hubot/sprintly-deploy-pull-request` with the following parameters:\n\n- `numbers`: (_required_) comma-separated list of Pull Request / Issue numbers\n- `repo`: (_required_) repository to find those numbers\n- `owner`: owner of the repository (defaults to `process.env.HUBOT_GITHUB_USER`)\n- `productId`: numeric id of Sprint.ly product (defaults to `process.env.HUBOT_SPRINTLY_PRODUCT_ID`)\n- `auth`: Sprint.ly authentication token <email:api_key> (defaults to `process.env.HUBOT_SPRINTLY_TOKEN`)\n- `env`: environment to which you just deployed to be used in Sprint.ly (defaults to 'production')\n\nWhat you might add to your deploy script:\n\n```bash\n# repository name\nprojectName=yourproject\n\nfunction sprintlyDeploy {\n  # get last two git tags for git log. returns something like release123..release124\n  tagDiff=`git tag -l \"release-*\" | sort --version-sort  | tail -n 2 | xargs echo | sed 's/ /../'`\n  # get issue numbers from git log\n  numbers=`git log --pretty=format:%s $tagDiff | egrep -o '#[0-9]+' | sed 's/#//g'`\n  curl -X POST -d \"numbers=$numbers&repo=$projectName&environment=$1\" http://your-hubot-host/hubot/sprintly-deploy-pull-request\n}\n\n# you can use this function in other scripts that deploy to different environments\nsprintlyDeploy production\n```\n","maintainers":[{"name":"maxbeatty","email":"max@beatty.me"}],"time":{"modified":"2014-03-07T19:42:45.223Z","created":"2014-03-07T18:39:35.452Z","0.0.0":"2014-03-07T18:39:36.583Z","0.0.1":"2014-03-07T18:50:43.565Z","0.0.2":"2014-03-07T19:42:45.223Z"},"readmeFilename":"README.md","homepage":"https://github.com/maxbeatty/hubot-sprintly-deploy-pull-request","keywords":["hubot","sprintly","github"],"repository":{"type":"git","url":"git://github.com/maxbeatty/hubot-sprintly-deploy-pull-request.git"},"author":{"name":"Max Beatty"},"bugs":{"url":"https://github.com/maxbeatty/hubot-sprintly-deploy-pull-request/issues"},"license":"MIT"}
