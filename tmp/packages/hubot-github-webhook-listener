{"_id":"hubot-github-webhook-listener","_rev":"1-a74c96faa59dcf9e8f003290efdac9bc","name":"hubot-github-webhook-listener","description":"Listens for github webhooks and emits an event for other Hubot scripts to respond to.","dist-tags":{"latest":"0.9.1"},"versions":{"0.9.0":{"name":"hubot-github-webhook-listener","version":"0.9.0","author":{"name":"Taylor Brown","email":"taylor@youneedabudget.com"},"description":"Listens for github webhooks and emits an event for other Hubot scripts to respond to.","keywords":["hubot","chat","github","bot","webhook"],"licenses":[{"type":"MIT","url":"http://github.com/ynab/hubot-github-webhook-listener/raw/master/LICENSE"}],"repository":{"type":"git","url":"http://github.com/ynab/hubot-github-webhook-listener.git"},"license":"MIT","main":"./src/index.coffee","devDependencies":{"coffee-script":"~1.7.1","hubot":">= 2.6.0 < 3.0.0"},"bugs":{"url":"https://github.com/ynab/hubot-github-webhook-listener/issues"},"dependencies":{"querystring":"^0.2.0","url":"^0.10.3"},"gitHead":"5a4b92db695e722df5765892162d27fe3f6cca24","homepage":"https://github.com/ynab/hubot-github-webhook-listener","_id":"hubot-github-webhook-listener@0.9.0","scripts":{},"_shasum":"4c34a38add45e783b67c7b56eedec367084f188d","_from":".","_npmVersion":"2.7.1","_nodeVersion":"0.10.33","_npmUser":{"name":"taytay","email":"taytay@taytay.com"},"maintainers":[{"name":"taytay","email":"taytay@taytay.com"}],"dist":{"shasum":"4c34a38add45e783b67c7b56eedec367084f188d","tarball":"http://registry.npmjs.org/hubot-github-webhook-listener/-/hubot-github-webhook-listener-0.9.0.tgz"}},"0.9.1":{"name":"hubot-github-webhook-listener","version":"0.9.1","author":{"name":"Taylor Brown","email":"taylor@youneedabudget.com"},"description":"Listens for github webhooks and emits an event for other Hubot scripts to respond to.","keywords":["hubot","chat","github","bot","webhook"],"licenses":[{"type":"MIT","url":"http://github.com/ynab/hubot-github-webhook-listener/raw/master/LICENSE"}],"repository":{"type":"git","url":"http://github.com/ynab/hubot-github-webhook-listener.git"},"license":"MIT","main":"./src/hubot-github-webhook-listener.coffee","devDependencies":{"coffee-script":"~1.7.1","hubot":">= 2.6.0 < 3.0.0"},"bugs":{"url":"https://github.com/ynab/hubot-github-webhook-listener/issues"},"dependencies":{"querystring":"^0.2.0","url":"^0.10.3"},"gitHead":"959d2c6301510b1eee69c1fc3c1303674ad4b98a","homepage":"https://github.com/ynab/hubot-github-webhook-listener","_id":"hubot-github-webhook-listener@0.9.1","scripts":{},"_shasum":"c12116f6981861f6def889b150664f337874522b","_from":".","_npmVersion":"2.7.1","_nodeVersion":"0.10.33","_npmUser":{"name":"taytay","email":"taytay@taytay.com"},"maintainers":[{"name":"taytay","email":"taytay@taytay.com"}],"dist":{"shasum":"c12116f6981861f6def889b150664f337874522b","tarball":"http://registry.npmjs.org/hubot-github-webhook-listener/-/hubot-github-webhook-listener-0.9.1.tgz"}}},"readme":"# hubot-github-webhook-listener\n\nA [Hubot](http://hubot.github.com/) script to that makes it easy to consume [Github Webhooks](https://developer.github.com/webhooks/).\n\n## Installation\n\nFrom your hubot folder:\n`npm install --save hub-github-webhook-listener`\n\nThen, in your `external-scripts.json` file, add: `\"hubot-github-webhook-listener\"` to the list.\n\nCreate a new webhook for your `myuser/myrepo` repository at:\nhttps://github.com/myuser/myrepo/settings/hooks/new\nSet the webhook url to: &lt;HUBOT_URL&gt;:&lt;PORT&gt;/hubot/github-repo-listener\n\nFor example, if your hubot lives at myhubot.herokuapp.com, then you will set the webhook URL to: http://myhubot.herokuapp.com/hubot/github-repo-listener\n\n## Usage\n\nOn every incoming webhook message, a hubot event is emitted as follows\n\n```coffeescript\neventBody =\n  eventType   : req.headers[\"x-github-event\"]\n  signature   : req.headers[\"X-Hub-Signature\"]\n  deliveryId  : req.headers[\"X-Github-Delivery\"]\n  payload     : req.body\n  query       : querystring.parse(url.parse(req.url).query)\n\nrobot.emit \"github-repo-event\", eventBody\n```\n\nFor details on these fields, see the [Github Webhook documentation](https://developer.github.com/webhooks/).\n\nYou can consume it like so from one of your scripts:\n```coffeescript\n@robot.on \"github-repo-event\", (repo_event) =>\n  githubPayload = repo_event.payload\n  switch(repo_event.eventType)\n    when \"issue_comment\"\n      ...\n```\n\nNOTE: This script does not emit anything in chat. It is just a background task that makes consuming Github webhooks easier for other scripts.\n\nFor another example, see our [Hubot-Github adapter](https://github.com/ynab/hubot-github) that gives you a hubot in your Github issue comments.\n\n## Motivation\n\nI was using [hubot-github-repo-event-notifier](https://github.com/hubot-scripts/hubot-github-repo-event-notifier), but I needed something more generic to power our hubot-github adapter. So, I gutted it, and this script was born.\n\n## Local Testing\n\nFor easy local testing, I highly recommend ngrok: https://ngrok.com/\n\n1. Install [ngrok](https://ngrok.com/)\n2. run ngrok: `ngrok 8080`.\n  It will show you a public URL like: `Forwarding  https://7a008da9.ngrok.com -> 127.0.0.1:8080`\n3. Put that URL in as your Github webhook: `https://7a008da9.ngrok.com/hubot/github-repo-listener`\n4. Run hubot locally: `HUBOT_GITHUB_TOKEN=some_log_guid bin/hubot -a github --name Hubot`\n5. Fire off a github event by interacting with your repo. Comment on an issue or a PR for example.\n6. Navigate to `http://127.0.0.1:4040/`\n  There you can see all webhooks posted to your local machine, and can replay them as many times as you wish.\n\n## Copyright\n\nCopyright &copy; [YouNeedABudget.com](http://youneedabudget.com), LLC. (Github: [YNAB](http://github.com/ynab))\n\n## Author\n\nTaylor Brown, aka [Taytay](http://github.com/Taytay)\n\n## License\n\nMIT License; see LICENSE for further details.\n","maintainers":[{"name":"taytay","email":"taytay@taytay.com"}],"time":{"modified":"2015-03-18T00:09:59.910Z","created":"2015-03-16T02:31:41.835Z","0.9.0":"2015-03-16T02:31:41.835Z","0.9.1":"2015-03-18T00:09:59.910Z"},"homepage":"https://github.com/ynab/hubot-github-webhook-listener","keywords":["hubot","chat","github","bot","webhook"],"repository":{"type":"git","url":"http://github.com/ynab/hubot-github-webhook-listener.git"},"author":{"name":"Taylor Brown","email":"taylor@youneedabudget.com"},"bugs":{"url":"https://github.com/ynab/hubot-github-webhook-listener/issues"},"license":"MIT","readmeFilename":"README.md","users":{"michaeldunton":true,"hmsk":true}}
