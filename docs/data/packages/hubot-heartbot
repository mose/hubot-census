{"_id":"hubot-heartbot","_rev":"2-a24c9760a15957b54a10678e49a16103","name":"hubot-heartbot","description":"A shot of love for your favorite chat client.","dist-tags":{"latest":"1.0.6"},"versions":{"1.0.1":{"name":"hubot-heartbot","description":"A shot of love for your favorite chat client.","author":{"name":"Kamal Nasser","email":"kamal@digitalocean.com"},"version":"1.0.1","main":"index.coffee","repository":{"type":"git","url":"https://github.com/digitalocean/heartbot"},"bugs":{"url":"https://github.com/digitalocean/heartbot/issues"},"keywords":["hubot","valentines","bot"],"license":"MIT","dependencies":{"forecast":"^0.2.1","giphy":"0.0.4","js-yaml":"^3.2.5"},"gitHead":"4885dc00981088d70755fea261b7a7afdcb305c3","homepage":"https://github.com/digitalocean/heartbot","_id":"hubot-heartbot@1.0.1","scripts":{},"_shasum":"872801ff9756710a5b7d415e875d54e54b395fac","_from":".","_npmVersion":"1.4.28","_npmUser":{"name":"digitalocean","email":"sammy@digitalocean.com"},"maintainers":[{"name":"digitalocean","email":"sammy@digitalocean.com"}],"dist":{"shasum":"872801ff9756710a5b7d415e875d54e54b395fac","tarball":"http://registry.npmjs.org/hubot-heartbot/-/hubot-heartbot-1.0.1.tgz"}},"1.0.2":{"name":"hubot-heartbot","description":"A shot of love for your favorite chat client.","author":{"name":"Kamal Nasser","email":"kamal@digitalocean.com"},"version":"1.0.2","main":"index.coffee","repository":{"type":"git","url":"https://github.com/digitalocean/heartbot"},"bugs":{"url":"https://github.com/digitalocean/heartbot/issues"},"keywords":["hubot","valentines","bot"],"license":"MIT","dependencies":{"forecast":"^0.2.1","giphy":"0.0.4","js-yaml":"^3.2.5"},"gitHead":"5b7b5e52a04715e0cd89282b17d76ecfadd876bd","homepage":"https://github.com/digitalocean/heartbot","_id":"hubot-heartbot@1.0.2","scripts":{},"_shasum":"3f187668336abd2129bbb9a01a6fe3fe31cb42dd","_from":".","_npmVersion":"1.4.28","_npmUser":{"name":"digitalocean","email":"sammy@digitalocean.com"},"maintainers":[{"name":"digitalocean","email":"sammy@digitalocean.com"}],"dist":{"shasum":"3f187668336abd2129bbb9a01a6fe3fe31cb42dd","tarball":"http://registry.npmjs.org/hubot-heartbot/-/hubot-heartbot-1.0.2.tgz"}},"1.0.3":{"name":"hubot-heartbot","description":"A shot of love for your favorite chat client.","author":{"name":"Kamal Nasser","email":"kamal@digitalocean.com"},"version":"1.0.3","main":"index.coffee","repository":{"type":"git","url":"https://github.com/digitalocean/heartbot"},"bugs":{"url":"https://github.com/digitalocean/heartbot/issues"},"keywords":["hubot","valentines","bot"],"license":"MIT","dependencies":{"forecast":"^0.2.1","giphy":"0.0.4","js-yaml":"^3.2.5"},"gitHead":"7043108235da843157d12c0d36ae17d52039c139","homepage":"https://github.com/digitalocean/heartbot","_id":"hubot-heartbot@1.0.3","scripts":{},"_shasum":"a25d0a1ca6065dc7b3a0a0735ec3b7ea961094c7","_from":".","_npmVersion":"1.4.28","_npmUser":{"name":"digitalocean","email":"sammy@digitalocean.com"},"maintainers":[{"name":"digitalocean","email":"sammy@digitalocean.com"}],"dist":{"shasum":"a25d0a1ca6065dc7b3a0a0735ec3b7ea961094c7","tarball":"http://registry.npmjs.org/hubot-heartbot/-/hubot-heartbot-1.0.3.tgz"}},"1.0.4":{"name":"hubot-heartbot","description":"A shot of love for your favorite chat client.","author":{"name":"Kamal Nasser","email":"kamal@digitalocean.com"},"version":"1.0.4","main":"index.coffee","repository":{"type":"git","url":"https://github.com/digitalocean/heartbot"},"bugs":{"url":"https://github.com/digitalocean/heartbot/issues"},"keywords":["hubot","valentines","bot"],"license":"MIT","dependencies":{"forecast":"^0.2.1","giphy":"0.0.4","js-yaml":"^3.2.5"},"gitHead":"2a44de7b335d9693212fed0ef07267928db0f5b8","homepage":"https://github.com/digitalocean/heartbot","_id":"hubot-heartbot@1.0.4","scripts":{},"_shasum":"8ad3c6e2933ef47eafc8415126d8486831f97e3d","_from":".","_npmVersion":"1.4.28","_npmUser":{"name":"digitalocean","email":"sammy@digitalocean.com"},"maintainers":[{"name":"digitalocean","email":"sammy@digitalocean.com"}],"dist":{"shasum":"8ad3c6e2933ef47eafc8415126d8486831f97e3d","tarball":"http://registry.npmjs.org/hubot-heartbot/-/hubot-heartbot-1.0.4.tgz"}},"1.0.5":{"name":"hubot-heartbot","description":"A shot of love for your favorite chat client.","author":{"name":"Kamal Nasser","email":"kamal@digitalocean.com"},"version":"1.0.5","main":"index.coffee","repository":{"type":"git","url":"https://github.com/digitalocean/heartbot"},"bugs":{"url":"https://github.com/digitalocean/heartbot/issues"},"keywords":["hubot","valentines","bot"],"license":"MIT","dependencies":{"forecast":"^0.2.1","giphy":"0.0.4","js-yaml":"^3.2.5"},"gitHead":"ad9a04a8e120d6b5624d34a2817cd9d8c6288982","homepage":"https://github.com/digitalocean/heartbot","_id":"hubot-heartbot@1.0.5","scripts":{},"_shasum":"b9b8580771d143a9f47e5d2a4a30fddc10eb3eed","_from":".","_npmVersion":"1.4.28","_npmUser":{"name":"digitalocean","email":"sammy@digitalocean.com"},"maintainers":[{"name":"digitalocean","email":"sammy@digitalocean.com"}],"dist":{"shasum":"b9b8580771d143a9f47e5d2a4a30fddc10eb3eed","tarball":"http://registry.npmjs.org/hubot-heartbot/-/hubot-heartbot-1.0.5.tgz"}},"1.0.6":{"name":"hubot-heartbot","description":"A shot of love for your favorite chat client.","author":{"name":"Kamal Nasser","email":"kamal@digitalocean.com"},"version":"1.0.6","main":"index.coffee","repository":{"type":"git","url":"https://github.com/digitalocean/heartbot"},"bugs":{"url":"https://github.com/digitalocean/heartbot/issues"},"keywords":["hubot","valentines","bot"],"license":"MIT","dependencies":{"forecast":"^0.2.1","giphy":"0.0.4","js-yaml":"^3.2.5"},"gitHead":"1fd01f9fa05a764b2907e2f23e9bff5ae4bd0cd0","homepage":"https://github.com/digitalocean/heartbot","_id":"hubot-heartbot@1.0.6","scripts":{},"_shasum":"1923410e68ecc68b5db65233ef6d01709bef5486","_from":".","_npmVersion":"1.4.28","_npmUser":{"name":"digitalocean","email":"sammy@digitalocean.com"},"maintainers":[{"name":"digitalocean","email":"sammy@digitalocean.com"}],"dist":{"shasum":"1923410e68ecc68b5db65233ef6d01709bef5486","tarball":"http://registry.npmjs.org/hubot-heartbot/-/hubot-heartbot-1.0.6.tgz"}}},"readme":"# ![](heartbot.png) Heartbot\n\nHeartbot is a [Hubot](https://hubot.github.com/) integration that can be plugged into Slack, Hipchat, IRC, or other chat clients. Once installed, type things like \"ugh\", \":(\", or \"kitty me\" and Heartbot will bring a little love and joy into the room. Spread the love on Twitter with #heartbot\n\n## Getting Started\n\nFirst, you need to have NodeJS installed on your server:\n\n- Ubuntu: [How To Install Node.js on an Ubuntu 14.04 server](https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-an-ubuntu-14-04-server)\n- CentOS: [How To Install Node.js on a CentOS 7 server](https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-a-centos-7-server)\n\nThen, you will want to install Hubot. Start by installing the `yo` and `generator-hubot` packages globally:\n\n```\nsudo npm install -g yo generator-hubot\n```\n\nGenerate a Hubot instance:\n\n```\nmkdir heartbot\ncd heartbot\nyo hubot\n```\n\nYou will be prompted for to choose a chat adapter. A list of chat adapters can be found [here](https://github.com/github/hubot/blob/master/docs/adapters.md). For example, to install the Slack chat adapter, run the following command:\n\n```\nnpm install hubot-slack --save\n```\n\nThen, [create a Hubot service](http://my.slack.com/services/new/hubot) and copy the API token.\n\nNext, install heartbot. While still in the `heartbot` directory, run:\n\n```\nnpm install hubot-heartbot --save\ncp node_modules/hubot-heartbot/config.yml heartbot.config.yml\n```\n\nTo enable the Heartbot Hubot plugin, add `hubot-heartbot` to `external-scripts.json`:\n\n```json\n...\n  \"hubot-youtube\",\n  \"hubot-heartbot\"\n]\n```\n\nSign up for [forecast.io](https://developer.forecast.io/) and copy your API key.\n\nFinally, start Heartbot:\n\n```\nHUBOT_SLACK_TOKEN=slack-token-here HEARTBOT_FORECAST_API_KEY=forecast.io-api-token-here ./bin/hubot -a slack\n```\n\n## Configuring Interactions\n\nHeartbot comes with [a number of interactions pre-configured](interactions.md). Heartbot's configuration file, `heartbot.config.yml`, can be found in your Hubot instance's root directory.\n\n```yaml\n---\nprobability: 0.6\ninteractions:\n    - pattern:\n        ...\n\n    - pattern:\n        ...\n```\n\nThe two main keys in the configuration file are:\n\n### probability\n\nA number between 0-1 that specifies the probability of Heartbot responding to a trigger. Setting it to 0 disables all interaction, while setting it to 1 makes Heartbot respond to all interactions at all times. Setting it to .5 would ensure that Heartbot would respond half the time to interactions.\n                 \nThis is done so that Heartbot does not get overly annoying in busy channels/rooms.\n\nIn addition, a single interaction's probability can be modified independently of the global probability setting. You can do that by passing a `probability` key to the interaction.\n                 \n### interactions\n \nA list of interactions that Heartbot should respond to.\n\nAn interaction should be written in the following format:\n\n```yaml\n- pattern:\n    regex: >-\n      ((what|who)('?s| is) |\\?)##heartbot##\n  event: say\n  message: I'm Heartbot, a Hubot integration that is here to bring a little love and joy into the room.\n  probability: 1\n```\n\n#### pattern\n\nThe `pattern` object should include a `regex` key and, optionally, an `options` key, which describe the RegEx pattern that should be match in order to trigger the interaction.\n\n* `regex`: The text of the regular expression. You can use `##heartbot##` in the pattern to match the bot's name, which will be replaced with the bot's name once the interaction is loaded.\n* `options`: Defaults to `i`. If specified, it can be a combination of any of the following values: `g`, `i`, `m`, and `y`. However, in this case, Heartbot would only benefit from the `i` option, which would make the RegEx pattern case-insensitive. You can find some details on the other options [here](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/RegExp).\n\n#### message\n\nThe text that the interaction should respond with. This is usually a string, but can be an array of strings out of which a random message is picked depending on whether or not the event supports that, which the three events that Heartbot comes with (in the `events` directory) do.\n\nThere are a number of variables that can be used:\n\n* `$user`: The name of the user who triggered the interaction.\n* `$room`: The room/channel which the user triggered the interaction in.\n* `$heartbot`: The bot's name.\n\n#### event\n\nThe name of the event that should be called once the interaction is triggered. Heartbot ships with three events (see the `events` directory):\n\n##### say\n\nSimply a message that Heartbot should respond with. Other than the variables described above, no additional processing is done.\n\nThe `say` event can accept an optional option:\n\n* `messageType`: How to actually respond. Can be either `say` (the default) or `action`.\n\n##### forecast\n\nFetch the temperature in a specific location and respond with the `message`. Two additional keys are required:\n\n* `location`: An object of the `latitude` and `longitude` of the location.\n* `units`: Which units to use, can be either `F` or `C`.\n\nIn addition to these two keys, a [forecast.io API key](https://developer.forecast.io/) is required. You can pass the API key in an environment variable called `HEARTBOT_FORECAST_API_KEY`.\n\nThe `forecast` event supplies two variables to the `message`:\n\n* `$temperature`: The temperature in the said location.\n* `$units`: The units used.\n\nFor example, to fetch the temperature in *Oymyakon, Russia*:\n\n```yaml\n- pattern:\n    ...\n  event: forecast\n  message: It could be worse. It’s currently $temperature° $units in Oymyakon, Russia\n  location:\n    latitude: 63.460833\n    longitude: 142.785833\n  units: C\n```\n\n##### giphy\n\nSearch [Giphy](http://giphy.com) for a random gif based on a specific search query.\n\nThe `giphy` event expects two options:\n\n* `tag`: The search query.\n* `rating`: Defaults to `g`. Limits search results to those rated `y`, `g`, `pg`, `pg-13`, or `r`.\n\nIf you are using Heartbot in production, you should pass an API key as the public API key that is used by default is subject to rate limiting and is intended only for development usage.\n\nPlease see [Giphy API Documentation > Access and API Keys](https://github.com/Giphy/GiphyAPI#access-and-api-keys). The API key can be passed using the environment variable `HEARTBOT_GIPHY_API_KEY`.\n\n```yaml\n- pattern:\n    regex: ^puppy me$\n  event: giphy\n  tag: cute puppy\n  message: Here's a puppy: $gif\n```\n\n### probability\n\nA single interaction's probability can be overridden to make it different from the global probability value. Simply pass a `probability` key with the new probability value:\n\n```yaml\n- pattern:\n    regex: ^puppy me$\n  event: giphy\n  tag: cute puppy\n  message: Here's a puppy: $gif\n  probability: 1\n```\n\n## Extending Heartbot\n\nIt is possible to write and use custom events. Events are written in [CoffeeScript](http://coffeescript.org/) and should export a class with a method called `process`. The rest is entirely up to you.\n\nThe `constructor` is passed the `interaction` object from the configuration file.\n\nThe `process` method is called with one argument: `msg`, an instance of Hubot's Response class. Please see [Hubot's official documentation on it](https://github.com/github/hubot/blob/master/docs/scripting.md#send--reply).\n\nA few helper functions are included in `lib/common.coffee`:\n\n**`applyVariable = (string, variable, value, regexFlags = 'i')`**\n\n* `string`: A string/template which the variable should be added to.\n* `variable`: The variable's name.\n* `value`: The variable's value.\n* `regexFlags`: Defaults to `i`. The flags that are used to match `variable` in `string`.\n\nFor example:\n\n```coffeescript\nstring = 'Hello, $user!'\n\napplyVariable string, 'user', 'Jane'\n# 'Hello, Jane!'\n```\n\n**`msgVariables = (message, msg)`**\n\n* `message`: A string/template which the variables should be added to.\n* `msg`: The `msg` variable that is passed to [the `process` method](#adding-events).\n\nThis function provides [a few variables](#message) from `msg` to `message`.\n\n**`stringElseRandomKey = (variable)`**\n\nIf `variable` is a string, it is simply returned back. However, if it is an array, a random item is returned.\n\n**`regexEscape = (string)`**\n\nEscape `string` so that it can safely be used in a RegEx pattern.\n","maintainers":[{"name":"digitalocean","email":"sammy@digitalocean.com"}],"time":{"modified":"2015-02-13T18:53:53.833Z","created":"2015-02-13T14:52:34.382Z","1.0.0":"2015-02-13T14:52:34.382Z","1.0.1":"2015-02-13T14:55:09.686Z","1.0.2":"2015-02-13T15:06:02.118Z","1.0.3":"2015-02-13T15:18:15.753Z","1.0.4":"2015-02-13T15:26:33.896Z","1.0.5":"2015-02-13T15:37:36.117Z","1.0.6":"2015-02-13T18:53:53.833Z"},"homepage":"https://github.com/digitalocean/heartbot","keywords":["hubot","valentines","bot"],"repository":{"type":"git","url":"https://github.com/digitalocean/heartbot"},"author":{"name":"Kamal Nasser","email":"kamal@digitalocean.com"},"bugs":{"url":"https://github.com/digitalocean/heartbot/issues"},"license":"MIT","readmeFilename":"README.md"}
